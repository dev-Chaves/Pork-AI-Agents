ğŸ· Pork-AI-Agents: Monitoramento Inteligente com Agentes de IA

Este projeto implementa um sistema de monitoramento autÃ´nomo para aplicaÃ§Ãµes (especialmente Spring Boot com Actuator), utilizando uma equipe de agentes de IA orquestrada pelo framework CrewAI.

A soluÃ§Ã£o se conecta a um Large Language Model (LLM) atravÃ©s do RouteLLM da Abacus.AI, permitindo uma anÃ¡lise inteligente e contextual das mÃ©tricas da aplicaÃ§Ã£o.

AlÃ©m do monitoramento agendado, o sistema integra-se a um bot do Telegram para enviar alertas e receber comandos, tornando a operaÃ§Ã£o mais interativa e acessÃ­vel.

ğŸ“œ Tabela de ConteÃºdos

Como Funciona: A Equipe de Agentes

Principais Funcionalidades

Estrutura do Projeto

Como ComeÃ§ar

PrÃ©-requisitos

ConfiguraÃ§Ã£o do Ambiente

Executando com Docker

Executando Localmente

Tecnologias Utilizadas

Melhorias Futuras

ğŸš€ Como Funciona: A Equipe de Agentes (Crew)

O coraÃ§Ã£o do sistema Ã© uma equipe de trÃªs agentes de IA, cada um com uma funÃ§Ã£o especÃ­fica, que trabalham em sequÃªncia para transformar dados brutos em insights acionÃ¡veis.

1. ğŸ¤– Agente Coletor de Dados (Data Collector Agent)

MissÃ£o: Acessar os endpoints do Spring Boot Actuator da aplicaÃ§Ã£o-alvo.

Ferramentas: ApiMonitoringTool (faz requisiÃ§Ãµes HTTP com retentativas).

Resultado: Agrupa informaÃ§Ãµes (saÃºde, mÃ©tricas de CPU/memÃ³ria, traces, etc.) em um JSON estruturado.

2. ğŸ§  Agente Analista de Dados (Data Analyzer Agent)

MissÃ£o: Interpretar o JSON bruto fornecido pelo Coletor.

InteligÃªncia: Utiliza o LLM via RouteLLM para:

Converter mÃ©tricas (ex: bytes â†’ MB)

Comparar valores com thresholds (SLOs)

Identificar anomalias, gerar diagnÃ³stico completo

Resultado: JSON de anÃ¡lise com severidade (INFO, WARN, ALERT), findings detalhados e aÃ§Ãµes recomendadas.

3. ğŸ“¢ Agente Notificador (Notification Agent)

MissÃ£o: Traduzir a anÃ¡lise em mensagem clara e humana.

ComunicaÃ§Ã£o: Mensagem formatada para Telegram.

Resultado: Alerta final compreensÃ­vel pela equipe de desenvolvimento ou SRE.

âœ¨ Principais Funcionalidades

Monitoramento Automatizado: ExecuÃ§Ãµes agendadas (ex.: diariamente Ã s 12:00).

AnÃ¡lise Potencializada por IA: DiagnÃ³sticos com contexto, nÃ£o sÃ³ alertas crus.

Controle via Telegram:

/run â†’ Executa monitoramento imediato

/status â†’ Verifica se o sistema estÃ¡ online

/logs â†’ Retorna logs da Ãºltima execuÃ§Ã£o

/config â†’ Mostra thresholds atuais

/help â†’ Lista comandos

Containerizado: FÃ¡cil deploy com Docker e Compose.

PersistÃªncia de Logs: SaÃ­da salva em monitoring_logs.json.

ğŸ“‚ Estrutura do Projeto
â”œâ”€â”€ .dockerignore         # Arquivos ignorados no Docker
â”œâ”€â”€ .env                  # VariÃ¡veis de ambiente
â”œâ”€â”€ .gitignore            # Arquivos ignorados no Git
â”œâ”€â”€ Dockerfile            # Imagem Docker do monitor
â”œâ”€â”€ README.MD             # DocumentaÃ§Ã£o
â”œâ”€â”€ compose.yaml          # OrquestraÃ§Ã£o com Docker Compose
â”œâ”€â”€ monitor.py            # Script principal (agentes)
â”œâ”€â”€ monitoring_logs.json  # Logs das execuÃ§Ãµes
â””â”€â”€ requirements.txt      # DependÃªncias Python

ğŸ› ï¸ Como ComeÃ§ar
PrÃ©-requisitos

Python 3.9+

Docker e Docker Compose

Bot do Telegram + Chat ID

Chave de API para algum LLM (via RouteLLM)

1. ConfiguraÃ§Ã£o do Ambiente

Crie um .env na raiz do projeto:

OPENAI_API_KEY="sk-..."
API_BASE_URL="http://sua-api.example.com"
MONITORING_API_KEY="sua-chave-de-monitoramento"

# Telegram (opcional)
TELEGRAM_BOT_TOKEN="token-do-seu-bot"
TELEGRAM_CHAT_ID="id-do-seu-chat"

# Thresholds
MEMORY_ALERT_MB=700
CPU_ALERT_PCT=85.0
ERROR_RATE_SLO_PCT=1.0
LATENCY_P95_SLO_MS=800

2. Executando com Docker (Recomendado)
docker-compose up --build -d    # Sobe container
docker-compose logs -f          # Logs em tempo real
docker-compose down             # Para o container

3. Executando Localmente
# Criar ambiente virtual
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# .\.venv\Scripts\Activate.ps1  # Windows

# Instalar dependÃªncias
pip install -r requirements.txt

# Rodar monitor
python monitor.py

âš™ï¸ Tecnologias Utilizadas

CrewAI â†’ OrquestraÃ§Ã£o de agentes de IA

RouteLLM (Abacus.AI) â†’ Roteamento inteligente de LLMs

OpenAI Python Client â†’ ComunicaÃ§Ã£o com API

Docker â†’ ContainerizaÃ§Ã£o

Schedule â†’ Agendamento de tarefas

python-dotenv â†’ Variables de ambiente

ğŸ’¡ Melhorias Futuras

Logging mais robusto (com rotaÃ§Ã£o de arquivos).

Novas ferramentas de agentes (ex.: consultar doc da API).

Criar testes unitÃ¡rios para ApiMonitoringTool.

Suporte a mÃºltiplos alvos de monitoramento.