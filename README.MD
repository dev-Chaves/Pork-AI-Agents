# üê∑ Pork-AI-Agents: Monitoramento Inteligente com Agentes de IA

![Python](https://img.shields.io/badge/Python-3.11-blue.svg)
![CrewAI](https://img.shields.io/badge/CrewAI-Agentic%20Framework-orange.svg)
![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)

Este projeto implementa um sistema de monitoramento aut√¥nomo para aplica√ß√µes (especialmente Spring Boot com Actuator), utilizando uma equipe de agentes de IA orquestrada pelo framework **CrewAI**. A solu√ß√£o se conecta a um Large Language Model (LLM) atrav√©s do **RouteLLM da Abacus.AI**, permitindo uma an√°lise inteligente e contextual das m√©tricas da aplica√ß√£o.

Al√©m do monitoramento agendado, o sistema integra-se a um bot do **Telegram** para enviar alertas e receber comandos, tornando a opera√ß√£o mais interativa e acess√≠vel.

---

## üìú Tabela de Conte√∫dos

1.  [Como Funciona: A Equipe de Agentes](#-como-funciona-a-equipe-de-agentes-crew)
2.  [Principais Funcionalidades](#-principais-funcionalidades)
3.  [Estrutura do Projeto](#-estrutura-do-projeto)
4.  [Como Come√ßar](#Ô∏è-como-come√ßar)
    * [Pr√©-requisitos](#pr√©-requisitos)
    * [Configura√ß√£o do Ambiente](#1-configura√ß√£o-do-ambiente)
    * [Executando com Docker](#2-executando-com-docker-recomendado)
    * [Executando Localmente](#3-executando-localmente)
5.  [Tecnologias Utilizadas](#Ô∏è-tecnologias-utilizadas)
6.  [Melhorias Futuras](#-melhorias-futuras)

---

## üöÄ Como Funciona: A Equipe de Agentes (Crew)

O cora√ß√£o do sistema √© uma equipe de tr√™s agentes de IA, cada um com uma fun√ß√£o espec√≠fica, que trabalham em sequ√™ncia para transformar dados brutos em insights acion√°veis.

### 1. ü§ñ Agente Coletor de Dados (`Data Collector Agent`)
- **Miss√£o:** Acessar os endpoints do Spring Boot Actuator da aplica√ß√£o-alvo.
- **Ferramentas:** `ApiMonitoringTool` (uma ferramenta customizada que faz requisi√ß√µes HTTP com retentativas).
- **Resultado:** Agrupa todas as informa√ß√µes coletadas (sa√∫de, m√©tricas de CPU/mem√≥ria, traces HTTP, etc.) em um √∫nico documento JSON estruturado.

### 2. üß† Agente Analista de Dados (`Data Analyzer Agent`)
- **Miss√£o:** Interpretar o JSON bruto fornecido pelo Coletor. Ele converte m√©tricas (ex: bytes para MB), calcula percentuais, e compara os valores com *thresholds* (limites) pr√©-definidos (SLOs).
- **Intelig√™ncia:** Utiliza o LLM via RouteLLM para identificar anomalias, correlacionar eventos e gerar um diagn√≥stico completo.
- **Resultado:** Produz um novo JSON com uma an√°lise aprofundada, incluindo n√≠vel de severidade (`INFO`, `WARN`, `ALERT`), *findings* detalhados e a√ß√µes recomendadas.

### 3. üì¢ Agente Notificador (`Notification Agent`)
- **Miss√£o:** Traduzir a an√°lise t√©cnica e estruturada do Analista em uma mensagem clara, concisa e humana.
- **Comunica√ß√£o:** Formata o alerta para ser facilmente compreendido pela equipe de desenvolvimento ou SRE.
- **Resultado:** Gera a mensagem final que ser√° enviada para o Telegram.

---

## ‚ú® Principais Funcionalidades

- **Monitoramento Automatizado:** O script roda em um agendamento (diariamente √†s 12:00, por padr√£o) para verifica√ß√µes peri√≥dicas.
- **An√°lise Potencializada por IA:** Vai al√©m de simples alertas de "CPU alta", fornecendo contexto e sugest√µes de investiga√ß√£o.
- **Controle Interativo via Telegram:** Envie comandos para o bot para interagir com o sistema:
  - `/run`: Dispara uma execu√ß√£o de monitoramento imediatamente.
  - `/status`: Verifica se o monitor est√° online.
  - `/logs`: Exibe o resultado da √∫ltima execu√ß√£o.
  - `/config`: Mostra os thresholds de alerta atuais.
  - `/help`: Lista todos os comandos.
- **Containerizado e Pronto para Deploy:** Com `Dockerfile` e `compose.yaml`, a implanta√ß√£o √© simples e isolada.
- **Persist√™ncia de Logs:** Cada execu√ß√£o √© salva em um arquivo `monitoring_logs.json`.

---

## üìÇ Estrutura do Projeto

‚îú‚îÄ‚îÄ .dockerignore         # Arquivos a serem ignorados pela imagem Docker.
‚îú‚îÄ‚îÄ .env                  # Arquivo para vari√°veis de ambiente (N√ÉO versionado).
‚îú‚îÄ‚îÄ .gitignore            # Arquivos a serem ignorados pelo Git.
‚îú‚îÄ‚îÄ Dockerfile            # Define a imagem Docker para rodar o monitor.
‚îú‚îÄ‚îÄ README.MD             # Este arquivo.
‚îú‚îÄ‚îÄ compose.yaml          # Orquestra o container do monitor com Docker Compose.
‚îú‚îÄ‚îÄ monitor.py            # O script principal que define e executa os agentes.
‚îú‚îÄ‚îÄ monitoring_logs.json  # (Gerado) Logs das execu√ß√µes do monitor.
‚îî‚îÄ‚îÄ requirements.txt      # Depend√™ncias Python do projeto.

## üõ†Ô∏è Como Come√ßar

### Pr√©-requisitos

- Python 3.9+
- Docker e Docker Compose (recomendado)
- Um Bot do Telegram e o ID de um Chat para receber as notifica√ß√µes.
- Acesso a um servi√ßo de LLM (configurado via RouteLLM).

### 1. Configura√ß√£o do Ambiente

Clone o reposit√≥rio e crie um arquivo `.env` na raiz do projeto. Use o exemplo abaixo como base:

```env
# Chave de API para o RouteLLM (ou o provedor de LLM que ele roteia)
OPENAI_API_KEY="sk-..."

# URL base da API a ser monitorada (com endpoints Actuator)
API_BASE_URL="[http://sua-api.example.com](http://sua-api.example.com)"

# Chave de API para autenticar nos endpoints de monitoramento (X-API-KEY)
MONITORING_API_KEY="sua-chave-de-monitoramento"

# --- Telegram (Opcional, mas recomendado) ---
TELEGRAM_BOT_TOKEN="token-do-seu-bot"
TELEGRAM_CHAT_ID="id-do-seu-chat"

# --- Thresholds de Alerta (Opcional) ---
MEMORY_ALERT_MB=700
CPU_ALERT_PCT=85.0
ERROR_RATE_SLO_PCT=1.0
LATENCY_P95_SLO_MS=800

# Constr√≥i a imagem e sobe o container em background
docker-compose up --build -d

# Para ver os logs em tempo real
docker-compose logs -f

# Para parar o container
docker-compose down

# 1. Crie e ative um ambiente virtual
python -m venv .venv
source .venv/bin/activate  # No Linux/macOS
# .\.venv\Scripts\Activate.ps1 # No Windows (PowerShell)

# 2. Instale as depend√™ncias
pip install -r requirements.txt

# 3. Execute o script
python monitor.py

